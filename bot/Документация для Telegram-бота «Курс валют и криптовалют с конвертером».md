# Документация для Telegram-бота «Курс валют и криптовалют с конвертером»

  

## Описание

 

Данный Telegram-бот предоставляет пользователям актуальные курсы основных валют (USD, EUR, GBP) к рублю (RUB), курсы популярных криптовалют к доллару (USD) и конвертер валют с поддержкой разных пар. Бот построен с использованием библиотеки python-telegram-bot и обращается к публичным API для получения курсов.

 

---

 

## Функциональность

 

- Просмотр курса валют USD, EUR, GBP к RUB
- Просмотр курса популярных криптовалют (BTC, ETH, BNB, XRP, SOL, ADA, DOGE, DOT, TRX, LINK) в USD
- Конвертация суммы из одной валюты в другую с поддержкой нескольких валют
- Удобное меню с кнопками для навигации

 

---

 

## Используемые библиотеки

 

- python-telegram-bot — для работы с Telegram API
- requests — для HTTP-запросов к внешним API

 

---

 

## Основные компоненты кода

 

### 1. Получение курсов валют и криптовалют

 

- **get_exchange_rate(base: str, target='RUB')**
   Возвращает курс обмена валюты base к валюте target (по умолчанию RUB), используя API exchangerate-api.com.
- **get_crypto_rate(crypto_id)**
   Возвращает курс криптовалюты crypto_id в долларах США, используя CoinGecko API.
- Вспомогательные функции для 10 популярных криптовалют (get_btc_rate(), get_eth_rate(), и т.д.) вызывают get_crypto_rate() с нужным идентификатором.

 

### 2. Меню бота

 

- **get_main_menu()** — главное меню с тремя опциями: Курс валют, Криптовалюта, Конвертор
- **get_currency_menu()** — меню выбора валют для просмотра курса (USD, EUR, GBP)
- **get_crypto_menu()** — меню с кнопками популярных криптовалют
- **get_converter_menu()** — меню конвертера с кнопкой назад

 

Меню реализовано через InlineKeyboardMarkup и InlineKeyboardButton.

 

### 3. Обработчики команд и кнопок

 

- **start(update, context)**
   Обрабатывает команду /start, приветствует пользователя и показывает главное меню.
- **button(update, context)**
   Обрабатывает нажатия кнопок меню. В зависимости от выбора пользователя показывает нужное подменю, курсы валют/криптовалют или переходит к конвертеру.
- **handle_message(update, context)**
   Обрабатывает текстовые сообщения от пользователя, в частности ввод для конвертации в формате 100 USD to RUB. Парсит введённые данные, делает запрос курса и выводит результат.

 

### 4. Состояния пользователей

 

Переменная user_states хранит состояние пользователя (например, ожидание ввода для конвертации), чтобы корректно обрабатывать сообщения.

 

### 5. Запуск бота

 

В функции main() создается приложение с токеном, добавляются обработчики, и запускается опрос сервера Telegram (run_polling()).

 

---

 

## Пример использования

 

1. Пользователь запускает бота командой /start.
2. Видит меню с выбором: Курс валют, Криптовалюта, Конвертор.
3. При выборе «Курс валют» — выбирает USD, EUR или GBP, видит актуальный курс к рублю.
4. При выборе «Криптовалюта» — выбирает интересующую крипту и получает курс в USD.
5. При выборе «Конвертор» — вводит сумму и валюты в формате 100 USD to RUB, получает результат конвертации.

   